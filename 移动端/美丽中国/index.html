<!DOCTYPE html>
<html lang="en" >
<head>
    <meta charset="UTF-8">
    <title>美丽中国</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="stylesheet" href="css/swiper.min.css">
    <link rel="stylesheet" href="css/animate.min.css">
    <link rel="stylesheet" href="css/index.css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script src="js/swiper.animate1.0.2.min.js"></script>
    <script src="js/swiper.min.js"></script>
    <script src="js/drawLine.js"></script>
    
    <style>
        body,html{
            width: 100%;
            height: 100%;
        }
        *{
            margin:0;
            padding:0;
        }
        .swiper-container{
            width: 100%;
            height: 100%;
        }
        .swiper-slide{
            background: url(img/bg.jpg) no-repeat center;
            background-size: cover;
        }
        .page1{
            /*height: 100%;*/
           /* background: url(img/bg.jpg) no-repeat center;
            background-size: cover;*/
            background: rgb(135,206,235);
            /*overflow: hidden;*/

        }
        div{
            font-size: .2rem;
        }
        #can{
            position: absolute;
        }

    </style>
</head>
<body>
<canvas id="can" >
        ......
</canvas>   
     <div class="swiper-container hide ">
        <div class="swiper-wrapper">
            <div class="swiper-slide page1">
                <img id="logo1" class="ani" swiper-animate-effect="fadeIn" swiper-animate-duration="1s" swiper-animate-delay="1s" src="img/logo1.png" alt="logo1"/>
                <img id="cloud2" class="ani" swiper-animate-effect="fadeInRight" swiper-animate-duration="1.1s" swiper-animate-delay="0s" src="img/fog_right.png" alt="cloud2">
                <img id="cloud1" class="ani" src="img/fog_left.png" swiper-animate-effect="fadeInLeft" swiper-animate-duration="1s" swiper-animate-delay="0.3s" alt="cloud1"  >
                <img src="img/bg.jpg" id="bg" class="ani" swiper-animate-effect="fadeIn" swiper-animate-duration="1s" swiper-animate-delay="2s">
                <img src="img/index_txt.png" class="ani" id="p_1" swiper-animate-effect="fadeIn" swiper-animate-duration="1s" swiper-animate-delay="0.1s"  alt="">
                <img src="img/index_b.png" class="ani" id="p_2" swiper-animate-effect="fadeIn" swiper-animate-duration="1s" swiper-animate-delay="0.1s"  alt=""> 
                <div class="up stop-swiping" ></div>
               
            </div>
            <div class="swiper-slide page2">
                <img id="bfc1" src="img/beautifulchina.png" alt="">
                <img id="bfc2" src="img/beautifulchina_en.png" alt="">
                <img id="bt" src="img/biaoti.png" alt="">
                <img id="zxx" src="img/zxx.png" alt="">
                <img id="year" src="img/2015.png" alt="">
                <div class="drawLine1">
                    
                </div>
                <!-- <div class="drawCicle">
                    
                </div> -->
            </div>
            <div class="swiper-slide page3">
            <div id="si" >
                <img  src="img/si.jpg" alt="">
            </div>
            </div>
            <div class="swiper-slide">

            </div>
            <div class="swiper-slide">slider5</div>
            <div class="swiper-slide">slider6</div>
            <div class="swiper-slide">slider7</div>
            <div class="swiper-slide">slider8</div>
        </div>
        <!-- 如果需要分页器 -->
        <div class="swiper-pagination"></div>
    </div>
</body>
<script src="js/preload.js"></script>
<script>
    (function() {
        var html = document.documentElement;
        var windowWidth = html.clientWidth;
        var offsetWidth = html.offsetWidth;
        var maxWidth = Math.max(windowWidth, offsetWidth);
        if (maxWidth >= 414) { //ipad
            maxWidth = 414;
        }
        html.style.fontSize = maxWidth / 7.5 + 'px';
    })();
    $.ajax({
      url: 'lib/img.json',
      dataType: "json",
      success: function(json){
        loading(json,{complete:main});
      }
    });

    function main(){
        $(".swiper-container").removeClass('hide');
        $(function() {
        arrPos = [
            [0, 0],
            [100, 150],
            [100, 550],
            [220, 550],
            [220, 700]
        ];
        arrPos1 = [
            [240, 100],
            [240, 300],
            [320, 450],
            [240, 450],
            [240, 400]
        ]
        var mySwiper = new Swiper('.swiper-container', {
            direction: 'vertical',
            noSwipingClass: 'stop-swiping',
            // effect: 'cube',
            cube: {
                slideShadows: true,
                shadow: true,
                shadowOffset: 100,
                shadowScale: 0.6,
            },
            onInit: function(swiper) { //Swiper2.x的初始化是onFirstInit
                swiperAnimateCache(swiper); //隐藏动画元素 
                swiperAnimate(swiper); //初始化完成开始动画
            },
            onSlideChangeEnd: function(swiper) {
                swiperAnimate(swiper); //每个slide切换结束时也运行当前slide动画
            },
            onSlideChangeStart: function(swiper) {
                if (mySwiper.activeIndex == 1) {
                    console.log("jinlaile");
                    var line1 = new Draw(arrPos, '.drawLine1');
                    var line2 = new Draw(arrPos1, '.drawLine1');
                    line1.drawA();
                    line2.drawA();
                } else {
                    $(".drawLine1").empty();
                }
            }
        });
        $("#si img").on('touchend',function(){
                $(this).toggleClass("widthChange"); 
        })
    })
    }
    

</script>

</html>



